{% macro alternate_links(locales) %}
    {%- if app.request and app.request.attributes.has('_route') and app.request.attributes.has('_locale') -%}
        {%- for locale in locales -%}

            {% set url = url(
                app.request.attributes.get('_route'),
                app.request.attributes.get('_route_params', {})|merge({'_locale': locale})|merge(app.request.query.all)
            ) %}

            <link rel="alternate" hreflang="{{ locale }}" href="{{ url }}">
        {%- endfor -%}
    {%- endif -%}
{% endmacro %}

{% macro heading(heading) %}

    {%- import 'DarvinContentBundle::macros.html.twig' as darvin_content -%}

    {{- heading }}{{ darvin_content.page_number() -}}
{% endmacro %}

{% macro meta_tags(description, keywords) %}

    {%- import 'DarvinContentBundle::macros.html.twig' as darvin_content -%}

    {%- if description -%}
        <meta name="description" content="{{ description }}{{ darvin_content.page_number() }}">
    {% endif %}
    {%- if keywords -%}
        <meta name="keywords" content="{{ keywords }}{{ darvin_content.page_number() }}">
    {% endif %}
{% endmacro %}

{% macro meta_title(title) %}

    {%- import 'DarvinContentBundle::macros.html.twig' as darvin_content -%}

    {{- title }}{{ darvin_content.page_number() -}}
{% endmacro %}

{% macro nav_links() %}
    {% if 1 == app.request.attributes.get('_darvin_content_page_params', [])|length %}

        {% set param = app.request.attributes.get('_darvin_content_page_params')|first %}

        {% for name in ['prev', 'next'] %}

            {% set number = app.request.attributes.get('_darvin_content_page_' ~ name) %}

            {% if number %}

                {% set url = url(
                    app.request.attributes.get('_route'),
                    app.request.attributes.get('_route_params', {})|merge(app.request.query.all)|merge({(param): number})
                ) %}

                <link rel="{{ name }}" href="{{ url }}">
            {% endif %}
        {% endfor %}
    {% endif %}
{% endmacro %}

{% macro page_number() %}

    {%- set number = app.request.attributes.get(constant('Darvin\\ContentBundle\\EventListener\\Pagination\\PagerSubscriber::REQUEST_ATTR_PAGE_NUMBER'), -1) -%}

    {% if number > 1 %}
        {%- trans with {'%number%': number} %}macro.page_number.number{% endtrans -%}
    {% elseif number == 0 %}
        {%- trans with {'%number%': number} %}macro.page_number.all{% endtrans -%}
    {% endif %}
{% endmacro %}
